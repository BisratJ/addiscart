(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[97],{2448:function(e,t,r){Promise.resolve().then(r.bind(r,9790))},9790:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var a=r(7437),s=r(2265),n=r(9376),l=r(7648),c=r(3145),o=r(9637),i=r(407),d=r(9397),u=r(1047),h=r(8930),x=r(5681),g=r(7179);function m(){let e=(0,n.useParams)(),t=null==e?void 0:e.storeId,r=null==e?void 0:e.categorySlug,[m,p]=(0,s.useState)(null),[f,y]=(0,s.useState)([]),[v,b]=(0,s.useState)(!0),[j,N]=(0,s.useState)(null),{cartItems:w,addToCart:k,updateQuantity:C,removeFromCart:Z}=(0,x.j)();(0,s.useEffect)(()=>{let e=async()=>{try{b(!0);let e=await fetch("".concat("http://localhost:5001/api","/api/categories/slug/").concat(r,"/").concat(t));if(!e.ok)throw Error("Category not found");let a=await e.json();p(a);let s=await fetch("".concat("http://localhost:5001/api","/api/products?category=").concat(a._id,"&store=").concat(t));if(s.ok){let e=await s.json();y(e.products||[])}}catch(e){console.error("Error fetching category:",e),N("Failed to load category")}finally{b(!1)}};t&&r&&e()},[t,r]);let P=(e,t)=>{t.preventDefault(),t.stopPropagation(),k({id:e._id,name:e.name,price:e.onSale&&e.salePrice?e.salePrice:e.price,originalPrice:e.price,image:e.images[0]||"",unit:e.unit})},S=(e,t)=>{var r;t.preventDefault(),t.stopPropagation();let a=(null===(r=w[e])||void 0===r?void 0:r.quantity)||0;C(e,a+1)},_=(e,t)=>{var r;t.preventDefault(),t.stopPropagation();let a=(null===(r=w[e])||void 0===r?void 0:r.quantity)||0;a>0&&C(e,a-1)},E=(e,t)=>{t.preventDefault(),t.stopPropagation(),Z(e)};return v?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-8"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5",children:[...Array(8)].map((e,t)=>(0,a.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 p-4",children:[(0,a.jsx)("div",{className:"aspect-square bg-gray-200 rounded-xl mb-4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]},t))})]})})}):j||!m?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Category Not Found"}),(0,a.jsx)(l.default,{href:"/stores/".concat(t),className:"text-green-600 hover:text-green-700",children:"Return to store"})]})})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,a.jsxs)("nav",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsxs)(l.default,{href:"/",className:"text-gray-600 hover:text-green-600 flex items-center gap-1",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),"Home"]}),(0,a.jsx)(i.Z,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)(l.default,{href:"/stores/".concat(t),className:"text-gray-600 hover:text-green-600",children:m.store.name}),m.parentCategory&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)(l.default,{href:"/stores/".concat(t,"/categories/").concat(m.parentCategory.slug),className:"text-gray-600 hover:text-green-600",children:m.parentCategory.name})]}),(0,a.jsx)(i.Z,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-gray-900 font-medium",children:m.name})]})})}),(0,a.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-green-50 to-green-100 rounded-2xl flex items-center justify-center text-4xl",children:m.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:m.name}),(0,a.jsx)("p",{className:"text-gray-600",children:m.description})]})]}),m.subcategories&&m.subcategories.length>0&&(0,a.jsx)("div",{className:"flex gap-3 overflow-x-auto scrollbar-hide pb-2",children:m.subcategories.map(e=>(0,a.jsxs)(l.default,{href:"/stores/".concat(t,"/categories/").concat(e.slug),className:"flex-shrink-0 flex items-center gap-2 bg-gray-50 hover:bg-green-50 border border-gray-200 hover:border-green-500 px-4 py-2 rounded-xl transition-all",children:[(0,a.jsx)("span",{className:"text-xl",children:e.icon}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.name})]},e._id))})]})}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-6 flex gap-6",children:[(0,a.jsx)("aside",{className:"hidden lg:block w-64 flex-shrink-0",children:(0,a.jsx)(g.Z,{storeId:t,currentCategorySlug:r,className:"sticky top-32"})}),(0,a.jsxs)("main",{className:"flex-1",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900",children:[f.length," ",1===f.length?"Product":"Products"]})}),0===f.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"No products found in this category."}),(0,a.jsx)(l.default,{href:"/stores/".concat(t),className:"inline-block mt-4 text-green-600 hover:text-green-700 font-medium",children:"Browse all products"})]}):(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5",children:f.map(e=>(0,a.jsxs)(l.default,{href:"/products/".concat(e._id),className:"bg-white rounded-2xl border border-gray-100 hover:border-green-200 hover:shadow-2xl transition-all duration-300 relative group overflow-hidden",children:[w[e._id]?(0,a.jsxs)("div",{className:"absolute top-2 right-2 z-10 bg-green-700 text-white rounded-full font-bold shadow-lg flex items-center gap-2 px-2 py-1.5",children:[(0,a.jsx)("button",{onClick:t=>{w[e._id].quantity>1?_(e._id,t):E(e._id,t)},className:"hover:bg-green-800 rounded-full p-1 transition-colors",children:w[e._id].quantity>1?(0,a.jsx)(u.Z,{className:"w-4 h-4"}):(0,a.jsx)(h.Z,{className:"w-4 h-4"})}),(0,a.jsx)("span",{className:"text-sm px-2",children:w[e._id].quantity}),(0,a.jsx)("button",{onClick:t=>S(e._id,t),className:"hover:bg-green-800 rounded-full p-1 transition-colors",children:(0,a.jsx)(d.Z,{className:"w-4 h-4"})})]}):(0,a.jsxs)("button",{onClick:t=>P(e,t),className:"absolute top-2 right-2 z-10 bg-green-600 text-white px-3 py-1.5 rounded-full font-semibold hover:bg-green-700 transition-colors shadow-sm flex items-center gap-1 text-sm",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),"Add"]}),(0,a.jsxs)("div",{className:"aspect-square relative bg-gradient-to-br from-gray-50 to-white p-4 flex items-center justify-center overflow-hidden",children:[(0,a.jsx)("div",{className:"relative w-full h-full",children:(0,a.jsx)(c.default,{src:e.images[0]||"https://placehold.co/600x600/CCCCCC/666666/png?text=Product",alt:e.name,fill:!0,className:"object-contain group-hover:scale-105 transition-transform duration-300"})}),e.onSale&&(0,a.jsx)("div",{className:"absolute top-2 left-2 bg-red-500 text-white px-2 py-1 rounded-md text-xs font-semibold",children:"Sale"})]}),(0,a.jsxs)("div",{className:"p-4 space-y-2",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 line-clamp-2 leading-snug min-h-[40px]",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.unit}),(0,a.jsxs)("div",{className:"flex items-center gap-2 pt-1",children:[(0,a.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:["$",e.onSale&&e.salePrice?e.salePrice.toFixed(2):e.price.toFixed(2)]}),e.onSale&&e.salePrice&&(0,a.jsxs)("span",{className:"text-sm text-gray-400 line-through",children:["$",e.price.toFixed(2)]})]})]})]},e._id))})]})]})]})}},7179:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var a=r(7437),s=r(7648),n=r(2265),l=r(875),c=r(407);function o(e){let{storeId:t,currentCategorySlug:r,className:o=""}=e,[i,d]=(0,n.useState)([]),[u,h]=(0,n.useState)(new Set),[x,g]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{try{g(!0);let e=await fetch("".concat("http://localhost:5001/api","/api/categories/hierarchy/").concat(t));if(!e.ok)throw Error("Failed to fetch categories");let a=await e.json();d(a),r&&a.forEach(e=>{var t;(null===(t=e.subcategories)||void 0===t?void 0:t.some(e=>e.slug===r))&&h(t=>new Set(t).add(e._id))})}catch(e){console.error("Error fetching categories:",e)}finally{g(!1)}})()},[t,r]);let m=e=>{h(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})};return x?(0,a.jsx)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-5 ".concat(o),children:(0,a.jsx)("div",{className:"space-y-2 animate-pulse",children:[...Array(8)].map((e,t)=>(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded"},t))})}):0===i.length?null:(0,a.jsx)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-5 ".concat(o),children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("h3",{className:"font-bold text-base text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-green-600",children:"\uD83D\uDCCB"}),"Browse categories"]}),(0,a.jsx)("div",{className:"max-h-[600px] overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 pr-2",children:i.map(e=>(0,a.jsxs)("div",{className:"mb-1",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)(s.default,{href:"/stores/".concat(t,"/categories/").concat(e.slug),className:"flex-1 text-sm font-medium px-3 py-2 rounded-lg transition-all ".concat(r===e.slug?"text-green-600 bg-green-50":"text-gray-700 hover:text-green-600 hover:bg-green-50"),children:[(0,a.jsx)("span",{className:"mr-2",children:e.icon}),e.name,void 0!==e.productCount&&e.productCount>0&&(0,a.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:["(",e.productCount,")"]})]}),e.subcategories&&e.subcategories.length>0&&(0,a.jsx)("button",{onClick:()=>m(e._id),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:u.has(e._id)?(0,a.jsx)(l.Z,{className:"w-4 h-4 text-gray-500"}):(0,a.jsx)(c.Z,{className:"w-4 h-4 text-gray-500"})})]}),e.subcategories&&e.subcategories.length>0&&u.has(e._id)&&(0,a.jsx)("div",{className:"ml-6 mt-1 space-y-1",children:e.subcategories.map(e=>(0,a.jsxs)(s.default,{href:"/stores/".concat(t,"/categories/").concat(e.slug),className:"block text-sm px-3 py-2 rounded-lg transition-all ".concat(r===e.slug?"text-green-600 bg-green-50 font-medium":"text-gray-600 hover:text-green-600 hover:bg-green-50"),children:[e.name,void 0!==e.productCount&&e.productCount>0&&(0,a.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:["(",e.productCount,")"]})]},e._id))})]},e._id))})]})})}},5681:function(e,t,r){"use strict";r.d(t,{Z:function(){return l},j:function(){return c}});var a=r(7437),s=r(2265);let n=(0,s.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,s.useState)({}),[c,o]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=localStorage.getItem("cart");if(e)try{l(JSON.parse(e))}catch(e){console.error("Error loading cart:",e)}},[]),(0,s.useEffect)(()=>{Object.keys(r).length>0?localStorage.setItem("cart",JSON.stringify(r)):localStorage.removeItem("cart")},[r]);let i=e=>{l(t=>{let{[e]:r,...a}=t;return a})};return(0,a.jsx)(n.Provider,{value:{cartItems:r,addToCart:e=>{l(t=>{let r=t[e.id];return r?{...t,[e.id]:{...r,quantity:r.quantity+1}}:{...t,[e.id]:{...e,quantity:1}}})},removeFromCart:i,updateQuantity:(e,t)=>{if(t<=0){i(e);return}l(r=>{let a=r[e];return a?{...r,[e]:{...a,quantity:t}}:r})},clearCart:()=>{l({}),localStorage.removeItem("cart")},getTotalItems:()=>Object.values(r).reduce((e,t)=>e+t.quantity,0),getTotalPrice:()=>Object.values(r).reduce((e,t)=>e+t.price*t.quantity,0),isCartOpen:c,setIsCartOpen:o},children:t})}function c(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},9763:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var a=r(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=(e,t)=>{let r=(0,a.forwardRef)((r,l)=>{let{color:c="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:d,children:u,...h}=r;return(0,a.createElement)("svg",{ref:l,...s,width:o,height:o,stroke:c,strokeWidth:d?24*Number(i)/Number(o):i,className:"lucide lucide-".concat(n(e)),...h},[...t.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...(Array.isArray(u)?u:[u])||[]])});return r.displayName="".concat(e),r}},875:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},407:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},9637:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},1047:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},9397:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8930:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[972,726,971,117,744],function(){return e(e.s=2448)}),_N_E=e.O()}]);